name: test

on:
  workflow_dispatch: # 手動実行も可能にする

jobs:
  build:
    runs-on: ubuntu-latest
    steps:

      - name: Notify Mattermost
        if: always()   # 成否に関わらず実行
        uses: mattermost/action-mattermost-notify@master
        with:
          MATTERMOST_WEBHOOK_URL: ${{ secrets.MATTERMOST_WEBHOOK_URL }}
          TEXT: |
            ${{ job.status == 'success' && '- URL: [https://voucherz.jp](https://voucherz.jp)　にアクセス可能です🚀 ' || '本番環境の構築に失敗しました。' }}
            - Workflow: **${{ github.workflow }}**
            - Branch: `${{ github.ref_name }}`
            - Actor: ${{ github.actor }}
            - Status: **${{ job.status }}**
            - [Run Logs](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})      
